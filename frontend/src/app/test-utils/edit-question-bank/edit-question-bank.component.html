<app-header></app-header>
<mat-card class="container">
  <mat-card-header>
    <mat-card-title>Edit test Questions Screen</mat-card-title>
  </mat-card-header>
  <mat-card-content class="mat-card-container">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Select test to edit questions</mat-card-title>
      </mat-card-header>
      <mat-card-content class="test-selection-container">
        <mat-form-field appearance="outline">
          <mat-label>Role</mat-label>
          <mat-select
            [(ngModel)]="selectedJobRoleID"
            (selectionChange)="onjobRoleValueChange()"
          >
            <mat-option
              *ngFor="let item of jobRoles"
              [value]="item.jobRoleID"
            >
              {{ item.jobRoleTitle }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </mat-card-content>
    </mat-card>
  </mat-card-content>
  <mat-card-content class="mat-card-container">
    <mat-card>
      <mat-card-header>
        <mat-card-title>Test Questions</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <mat-form-field
          *ngFor="let item of questions; let i = index"
          appearance="outline"
          class="questions-container"
        >
          <mat-label>Question</mat-label>
          <input
            (keyup.enter)="inputChange(i, $event.target.value)"
            (blur)="inputChange(i, $event.target.value)"
            [(value)]="item.question"
            matInput
            placeholder="ex : abc"
          />
          <mat-form-field style="margin: 0em 2em" appearance="outline">
            <mat-label>Domain</mat-label>
            <mat-select
              [value]="item.domainId"
              (selectionChange)="onDomainChange(i, $event.value)"
            >
              <mat-option
                *ngFor="let domain of domains"
                [value]="domain.testValue"
              >
                {{ domain.testName }}
              </mat-option>
            </mat-select>
          </mat-form-field>
          <button
            (click)="removeItem(i)"
            class="remove-button-icon"
            mat-icon-button
            aria-label="Example icon-button with a heart icon"
          >
            <mat-icon>remove</mat-icon>
          </button>
        </mat-form-field>
        <div class="add-more" *ngIf="questions?.length >= 0 && isRoleSelected">
          <button
            (click)="addMore()"
            mat-icon-button
            aria-label="Example icon-button with a heart icon"
          >
            <mat-icon>add</mat-icon>
            Add New
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </mat-card-content>
  <mat-card-actions
    ><div class="button-container">
      <button
        class="submit-button"
        (click)="submit()"
        mat-raised-button
        color="primary"
      >
        Save Questions
      </button>
    </div>
  </mat-card-actions>
</mat-card>
